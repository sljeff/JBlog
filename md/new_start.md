使用tornado重做了自己的博客，并且用上了HTTPS。

由于自己的懒惰，对Tornado不熟练，以及一些坑，这个简单的东西居然花费了近两周时间。

下面是对这两周的总结。

#### 不要乱开线程
为了“充分利用”Tornado的异步优势，在这样一个简单的博客程序的数据库操作里写了大量包含async关键字的异步代码。实现方式是，每个数据库操作都新开一个线程……这个做法是在Github上一个异步数据库操作库学习到的。洋洋洒洒写完300+行代码，仔细想想这样貌似并没有解决问题，Tornado本身就是希望减少线程的数量。在Tornado里开线程应该是没有办法协程又不能阻塞时万不得已才开的。于是我的代码就“阻塞”在这里，几天没有想去碰它们的欲望。之后直接让这个版本运行起来了。

现在是一堂完全不想听的《软件需求工程》课，花了两节课的时间把它们全部重写了。使用同步方式，但是数据库读内容的函数加上lru_cache。数据库写内容还是新开线程。对于blog这样应该是比较合理的优化了吧。

听说过“提早优化是错误的”这种说法。提前考虑优化确实给我带来了一些麻烦，我也相信“需求驱动编码”更加合理。当然这不过是一次小尝试。

#### lru_cache不要用于async def的函数
async def定义的函数返回值是一个future，是不能重用的。

#### Tornado居然有一个坑
Tornado的RedirectHandler类匹配文字并且转发是不能使用的。不仅官方文档写的实例没有用，在我提交issue之后，Tornado的开发者给出的解决方案也是没用的……我试着改了一下，没有解决，期待作者的修改。

另：提交issue居然也算作对项目的贡献！在自己的Github首页看到自己对一个1W+ star的项目有贡献居然有点兴奋。

---
还有很多问题需要解决，但是可能不会把它们完善。